//I am new with gradle, if anything is wrong or could be improved please tell me <3
//Plugins
plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '1.2.3'
//    id 'ninja.miserable.blossom' version '1.0.1'
}

apply plugin: "java"
apply plugin: "idea"
//apply plugin: "ninja.miserable.blossom"

//Project details
description "All you need to set up a server and more!"
group "bammerbom"
version "3.0.0-SNAPSHOT"

sourceSets {
    main.java.srcDir("src/main/java")
}

jar {
    manifest.attributes("Main-Class": "bammerbom.ultimatecore.Main")
    rootProject.libsDirName = '/'
    archiveName = "UltimateCore.jar"
}

//blossom {
//    replaceToken '@VERSION@', project.version, 'src/main/java/bammerbom/ultimatecore/sponge/UltimateCore.java'
//}

//Dependencies
repositories {
    mavenCentral()
    maven {
        name 'Sponge repo'
        url 'http://repo.spongepowered.org/maven'
    }
}

dependencies {
    compile "org.spongepowered:spongeapi:5.0.0-SNAPSHOT"
    compile "com.goebl:david-webb:1.3.0"
    compile "org.json:json"
}

shadowJar {
    archiveName = "UltimateCore.jar"
    classifier = null
    version = null
    dependencies {
        //Include david-webb in jar
        include(dependency('com.goebl:david-webb'))
        include(dependency('org.json:json'))
    }
}
build.dependsOn(shadowJar)
diff --git a/stagemonitor-core/src/main/java/org/stagemonitor/core/CorePlugin.java b/stagemonitor-core/src/main/java/org/stagemonitor/core/CorePlugin.java
index b2426735e9..13fb97c87e 100755
--- a/stagemonitor-core/src/main/java/org/stagemonitor/core/CorePlugin.java
+++ b/stagemonitor-core/src/main/java/org/stagemonitor/core/CorePlugin.java
@@ -339,8 +339,9 @@
 			.key("stagemonitor.instrument.include")
 			.dynamic(true)
 			.label("Included packages")
-			.description("The packages that should be included for instrumentation (for example the profiler). " +
-					"If this property is empty, all packages (except for the excluded ones) are instrumented. " +
+			.description("The packages that should be included for instrumentation. " +
+					"If this property is required if you want to use the profiler, the @MonitorRequests annotation, the " +
+					"com.codahale.metrics.annotation.* annotations or similar features. " +
 					"You can exclude subpackages of a included package via `stagemonitor.instrument.exclude`.")
 			.defaultValue(Collections.<String>emptySet())
 			.configurationCategory(CORE_PLUGIN_NAME)
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/RequestKeeper.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/RequestKeeper.java
index 09149668f4..bb04a7d46d 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/RequestKeeper.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/RequestKeeper.java
@@ -1,30 +1,32 @@
 package org.stagemonitor.vertx;
 
 import com.uber.jaeger.context.TraceContext;
+
 import org.stagemonitor.vertx.utils.SavedTraceContext;
 
 import java.util.concurrent.ConcurrentHashMap;
 
 public class RequestKeeper {
-    private static RequestKeeper ourInstance = new RequestKeeper();
-
-    public static RequestKeeper getInstance() {
-        return ourInstance;
-    }
+	private static RequestKeeper ourInstance = new RequestKeeper();
+	private ConcurrentHashMap<Object, SavedTraceContext> savedContexts;
 
-    private ConcurrentHashMap<Object, SavedTraceContext> savedContexts;
+	private RequestKeeper() {
+		savedContexts = new ConcurrentHashMap<>();
+	}
 
-    private RequestKeeper() {
-        savedContexts = new ConcurrentHashMap<>();
-    }
+	public static RequestKeeper getInstance() {
+		return ourInstance;
+	}
 
-    public SavedTraceContext getSavedContext(Object id){
-        return savedContexts.get(id);
-    }
+	public SavedTraceContext getSavedContext(Object id) {
+		SavedTraceContext context = savedContexts.get(id);
+		savedContexts.remove(id);
+		return context;
+	}
 
-    public void storeContext(Object id, TraceContext context){
-        savedContexts.put(id, new SavedTraceContext(context));
-    }
+	public void storeContext(Object id, TraceContext context) {
+		savedContexts.putIfAbsent(id, new SavedTraceContext(context));
+	}
 
 	public boolean containsKey(Object message) {
 		return savedContexts.containsKey(message);
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusConsumerTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusConsumerTransformer.java
index 682dc1f4b5..47ef21d624 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusConsumerTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusConsumerTransformer.java
@@ -1,12 +1,10 @@
 package org.stagemonitor.vertx.transformers;
 
-import io.vertx.core.Handler;
-import io.vertx.core.eventbus.Message;
-import io.vertx.core.eventbus.MessageConsumer;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
@@ -14,32 +12,38 @@
 import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.wrappers.MessageConsumerMonitoringHandler;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import io.vertx.core.Handler;
+import io.vertx.core.eventbus.Message;
+import io.vertx.core.eventbus.MessageConsumer;
+
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class EventBusConsumerTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(EventBusConsumerTransformer.class);
+	public static Logger logger = LoggerFactory.getLogger(EventBusConsumerTransformer.class);
+
+	private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
 
-    private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
+	@Advice.OnMethodEnter
+	public static void wrap(@Advice.Argument(value = 1, readOnly = false) Handler<Message<?>> handler) throws NoSuchFieldException, IllegalAccessException {
+		handler = new MessageConsumerMonitoringHandler(handler);
+	}
 
 	@Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return EventBusConsumerTransformer.class;
-    }
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return EventBusConsumerTransformer.class;
+	}
 
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named(vertxPlugin.getEventBusImplementation());
-    }
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named(vertxPlugin.getEventBusImplementation());
+	}
 
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
 		return takesArguments(String.class, Handler.class)
 				.and(returns(MessageConsumer.class));
-    }
-
-    @Advice.OnMethodEnter
-    public static void wrap(@Advice.Argument(value = 1, readOnly = false) Handler<Message<?>> handler) throws NoSuchFieldException, IllegalAccessException {
-		handler = new MessageConsumerMonitoringHandler(handler);
-    }
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusSendTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusSendTransformer.java
index 99a8007c40..bc4e23a866 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusSendTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/EventBusSendTransformer.java
@@ -1,47 +1,50 @@
 package org.stagemonitor.vertx.transformers;
 
 import com.uber.jaeger.context.TracingUtils;
-import io.vertx.core.eventbus.EventBus;
+
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
 import org.stagemonitor.vertx.RequestKeeper;
 import org.stagemonitor.vertx.VertxPlugin;
-import rx.Observable;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import io.vertx.core.eventbus.EventBus;
+
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
 
 public class EventBusSendTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(EventBusSendTransformer.class);
+	public static Logger logger = LoggerFactory.getLogger(EventBusSendTransformer.class);
 	private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
 
-    @Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return EventBusSendTransformer.class;
-    }
+	@Advice.OnMethodEnter
+	public static void storeContext(@Advice.Argument(value = 1) Object message) {
+		if (!RequestKeeper.getInstance().containsKey(message)) {
+			RequestKeeper.getInstance().storeContext(message, TracingUtils.getTraceContext());
+		}
+	}
 
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named(vertxPlugin.getEventBusImplementation());
-    }
+	@Override
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return EventBusSendTransformer.class;
+	}
 
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
-        return (named("send")
-				.or(named("publish")))
-                .and(returns(EventBus.class));
-    }
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named(vertxPlugin.getEventBusImplementation());
+	}
 
-    @Advice.OnMethodEnter
-    public static void storeContext(@Advice.Argument(value = 1) Object message){
-    	if(!RequestKeeper.getInstance().containsKey(message)){
-			RequestKeeper.getInstance().storeContext(message, TracingUtils.getTraceContext());
-		}
-    }
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+		return (named("send")
+				.or(named("publish")))
+				.and(returns(EventBus.class));
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/MessageConsumerTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/MessageConsumerTransformer.java
index 79c610a0ef..9098cd0076 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/MessageConsumerTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/MessageConsumerTransformer.java
@@ -1,50 +1,50 @@
 package org.stagemonitor.vertx.transformers;
 
-import io.vertx.core.Handler;
-import io.vertx.core.eventbus.Message;
-import io.vertx.core.eventbus.MessageConsumer;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
 import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.wrappers.MessageConsumerMonitoringHandler;
-import org.stagemonitor.vertx.wrappers.rxJava.ObservableWrapper;
-import rx.Observable;
 
-import java.lang.reflect.Field;
+import io.vertx.core.Handler;
+import io.vertx.core.eventbus.Message;
+import io.vertx.core.eventbus.MessageConsumer;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class MessageConsumerTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(MessageConsumerTransformer.class);
+	public static Logger logger = LoggerFactory.getLogger(MessageConsumerTransformer.class);
 
-    private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
+	private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
+
+	@Advice.OnMethodEnter
+	public static void wrap(@Advice.Argument(value = 0, readOnly = false) Handler<Message<?>> handler) throws NoSuchFieldException, IllegalAccessException {
+		handler = new MessageConsumerMonitoringHandler(handler);
+	}
 
 	@Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return MessageConsumerTransformer.class;
-    }
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return MessageConsumerTransformer.class;
+	}
 
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named(vertxPlugin.getMessageConsumerImplementation());
-    }
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named(vertxPlugin.getMessageConsumerImplementation());
+	}
 
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
 		return named("handler")
 				.and(takesArguments(Handler.class))
 				.and(returns(MessageConsumer.class));
-    }
-
-    @Advice.OnMethodEnter
-    public static void wrap(@Advice.Argument(value = 0,readOnly = false) Handler<Message<?>> handler) throws NoSuchFieldException, IllegalAccessException {
-		handler = new MessageConsumerMonitoringHandler(handler);
-    }
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/RouteHandlerTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/RouteHandlerTransformer.java
index bf6c4f4db4..79c7f7039f 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/RouteHandlerTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/RouteHandlerTransformer.java
@@ -1,12 +1,10 @@
 package org.stagemonitor.vertx.transformers;
 
-import io.vertx.core.Handler;
-import io.vertx.rxjava.ext.web.Route;
-import io.vertx.rxjava.ext.web.RoutingContext;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
@@ -14,33 +12,39 @@
 import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.wrappers.RouteMonitoringHandler;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import io.vertx.core.Handler;
+import io.vertx.rxjava.ext.web.Route;
+import io.vertx.rxjava.ext.web.RoutingContext;
+
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class RouteHandlerTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(RouteHandlerTransformer.class);
+	public static Logger logger = LoggerFactory.getLogger(RouteHandlerTransformer.class);
 
 	private static VertxPlugin vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
 
-    @Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return RouteHandlerTransformer.class;
-    }
-
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named(vertxPlugin.getWebRouteImplementation());
-    }
-
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
-        return named("handler")
-                .and(takesArguments(Handler.class))
-                .and(returns(Route.class));
-    }
-
-    @Advice.OnMethodEnter
-    public static void wrapHandler(@Advice.Argument(value = 0, readOnly = false) Handler<RoutingContext> handler) {
-        handler = new RouteMonitoringHandler(handler);
-    }
+	@Advice.OnMethodEnter
+	public static void wrapHandler(@Advice.Argument(value = 0, readOnly = false) Handler<RoutingContext> handler) {
+		handler = new RouteMonitoringHandler(handler);
+	}
+
+	@Override
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return RouteHandlerTransformer.class;
+	}
+
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named(vertxPlugin.getWebRouteImplementation());
+	}
+
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+		return named("handler")
+				.and(takesArguments(Handler.class))
+				.and(returns(Route.class));
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/EventBusSendObservableTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/EventBusSendObservableTransformer.java
index 68f660fbc2..0ae94800b7 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/EventBusSendObservableTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/EventBusSendObservableTransformer.java
@@ -1,41 +1,46 @@
 package org.stagemonitor.vertx.transformers.rxJava;
 
 import com.uber.jaeger.context.TracingUtils;
+
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
 import org.stagemonitor.vertx.RequestKeeper;
+
 import rx.Observable;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class EventBusSendObservableTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(EventBusSendObservableTransformer.class);
-
-    @Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return EventBusSendObservableTransformer.class;
-    }
-
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named("io.vertx.rxjava.core.eventbus.EventBus");
-    }
-
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
-        return named("sendObservable")
-                .and(returns(Observable.class))
-                .and(takesArguments(2));
-    }
+	public static Logger logger = LoggerFactory.getLogger(EventBusSendObservableTransformer.class);
 
-    @Advice.OnMethodEnter
-    public static void storeContext(@Advice.Argument(value = 1) Object message){
+	@Advice.OnMethodEnter
+	public static void storeContext(@Advice.Argument(value = 1) Object message) {
 		RequestKeeper.getInstance().storeContext(message, TracingUtils.getTraceContext());
-    }
+	}
+
+	@Override
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return EventBusSendObservableTransformer.class;
+	}
+
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named("io.vertx.rxjava.core.eventbus.EventBus");
+	}
+
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+		return named("sendObservable")
+				.and(returns(Observable.class))
+				.and(takesArguments(2));
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/MessageConsumerObservableTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/MessageConsumerObservableTransformer.java
index 3eadedd2e1..870f795bc8 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/MessageConsumerObservableTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/MessageConsumerObservableTransformer.java
@@ -1,50 +1,50 @@
 package org.stagemonitor.vertx.transformers.rxJava;
 
-import io.vertx.core.Handler;
-import io.vertx.core.eventbus.MessageConsumer;
-import io.vertx.rxjava.core.eventbus.Message;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
-import org.stagemonitor.core.Stagemonitor;
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
-import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.wrappers.rxJava.ObservableWrapper;
-import rx.Observable;
 
 import java.lang.reflect.Field;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import io.vertx.rxjava.core.eventbus.Message;
+import rx.Observable;
+
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class MessageConsumerObservableTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(MessageConsumerObservableTransformer.class);
+	public static Logger logger = LoggerFactory.getLogger(MessageConsumerObservableTransformer.class);
+
+	@Advice.OnMethodExit(onThrowable = Throwable.class)
+	@SuppressWarnings("unchecked")
+	public static void wrap(@Advice.Return(readOnly = false) Observable<Message<?>> observable) throws NoSuchFieldException, IllegalAccessException {
+		Field onSubscribe = observable.getClass().getDeclaredField("onSubscribe");
+		onSubscribe.setAccessible(true);
+		observable = new ObservableWrapper((Observable.OnSubscribe) onSubscribe.get(observable), "MONITORING_MESSAGE");
+	}
 
 	@Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return MessageConsumerObservableTransformer.class;
-    }
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return MessageConsumerObservableTransformer.class;
+	}
 
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named("io.vertx.rxjava.core.eventbus.MessageConsumer");
-    }
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named("io.vertx.rxjava.core.eventbus.MessageConsumer");
+	}
 
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
 		return named("toObservable")
 				.and(returns(Observable.class))
 				.and(takesArguments(0));
-    }
-
-    @Advice.OnMethodExit(onThrowable = Throwable.class)
-    @SuppressWarnings("unchecked")
-    public static void wrap(@Advice.Return(readOnly = false) Observable<Message<?>> observable) throws NoSuchFieldException, IllegalAccessException {
-		Field onSubscribe = observable.getClass().getDeclaredField("onSubscribe");
-        onSubscribe.setAccessible(true);
-		observable = new ObservableWrapper((Observable.OnSubscribe) onSubscribe.get(observable), "MONITORING_MESSAGE");
-    }
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/ObservableTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/ObservableTransformer.java
index 167825913d..e12a8d9fce 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/ObservableTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/ObservableTransformer.java
@@ -1,50 +1,50 @@
 package org.stagemonitor.vertx.transformers.rxJava;
 
-import io.vertx.rxjava.core.eventbus.Message;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
-import net.bytebuddy.implementation.bind.annotation.Argument;
-import net.bytebuddy.implementation.bind.annotation.Super;
-import net.bytebuddy.implementation.bind.annotation.This;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
 import org.stagemonitor.vertx.wrappers.rxJava.MessageConsumerMonitoringSubscriber;
 import org.stagemonitor.vertx.wrappers.rxJava.ObservableWrapper;
-import rx.Observable;
+
+import io.vertx.rxjava.core.eventbus.Message;
 import rx.Subscriber;
 import rx.Subscription;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class ObservableTransformer extends StagemonitorByteBuddyTransformer {
 
+	@Advice.OnMethodEnter
+	public static void intercept(@Advice.Argument(value = 0, readOnly = false) Subscriber<Message<?>> sub, @Advice.This Object instance) {
+		if (instance instanceof ObservableWrapper) {
+			ObservableWrapper observableWrapper = (ObservableWrapper) instance;
+			switch (observableWrapper.getBehavior()) {
+				case "MONITORING_MESSAGE":
+					sub = new MessageConsumerMonitoringSubscriber(sub);
+					break;
+			}
+		}
+	}
+
 	@Override
 	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
 		return ObservableTransformer.class;
 	}
 
 	@Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named("rx.Observable");
-    }
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named("rx.Observable");
+	}
 
 	@Override
 	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getMethodElementMatcher() {
 		return named("subscribe")
-			.and(takesArguments(Subscriber.class))
-			.and(returns(Subscription.class));
-	}
-
-	@Advice.OnMethodEnter
-	public static void intercept(@Advice.Argument(value = 0, readOnly = false) Subscriber<Message<?>> sub, @Advice.This Object instance) {
-		if(instance instanceof ObservableWrapper){
-			ObservableWrapper observableWrapper = (ObservableWrapper) instance;
-			switch (observableWrapper.getBehavior()){
-				case "MONITORING_MESSAGE":
-					sub = new MessageConsumerMonitoringSubscriber(sub);
-					break;
-			}
-		}
+				.and(takesArguments(Subscriber.class))
+				.and(returns(Subscription.class));
 	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/RouteRxHandlerTransformer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/RouteRxHandlerTransformer.java
index e3032f37d4..9cb386b3b0 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/RouteRxHandlerTransformer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/transformers/rxJava/RouteRxHandlerTransformer.java
@@ -1,42 +1,46 @@
 package org.stagemonitor.vertx.transformers.rxJava;
 
-import io.vertx.core.Handler;
-import io.vertx.rxjava.ext.web.Route;
-import io.vertx.rxjava.ext.web.RoutingContext;
 import net.bytebuddy.asm.Advice;
 import net.bytebuddy.description.method.MethodDescription;
 import net.bytebuddy.description.type.TypeDescription;
 import net.bytebuddy.matcher.ElementMatcher;
+
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.instrument.StagemonitorByteBuddyTransformer;
 import org.stagemonitor.vertx.wrappers.RouteMonitoringHandler;
 
-import static net.bytebuddy.matcher.ElementMatchers.*;
+import io.vertx.core.Handler;
+import io.vertx.rxjava.ext.web.Route;
+import io.vertx.rxjava.ext.web.RoutingContext;
+
+import static net.bytebuddy.matcher.ElementMatchers.named;
+import static net.bytebuddy.matcher.ElementMatchers.returns;
+import static net.bytebuddy.matcher.ElementMatchers.takesArguments;
 
 public class RouteRxHandlerTransformer extends StagemonitorByteBuddyTransformer {
 
-    public static Logger logger = LoggerFactory.getLogger(RouteRxHandlerTransformer.class);
-
-    @Override
-    protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
-        return RouteRxHandlerTransformer.class;
-    }
-
-    @Override
-    protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
-        return named("io.vertx.rxjava.ext.web.Route");
-    }
-
-    @Override
-    protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
-        return named("handler")
-                .and(takesArguments(Handler.class))
-                .and(returns(Route.class));
-    }
-
-    @Advice.OnMethodEnter
-    public static void wrapHandler(@Advice.Argument(value = 0, readOnly = false) Handler<RoutingContext> handler) {
-        handler = new RouteMonitoringHandler(handler);
-    }
+	public static Logger logger = LoggerFactory.getLogger(RouteRxHandlerTransformer.class);
+
+	@Advice.OnMethodEnter
+	public static void wrapHandler(@Advice.Argument(value = 0, readOnly = false) Handler<RoutingContext> handler) {
+		handler = new RouteMonitoringHandler(handler);
+	}
+
+	@Override
+	protected Class<? extends StagemonitorByteBuddyTransformer> getAdviceClass() {
+		return RouteRxHandlerTransformer.class;
+	}
+
+	@Override
+	protected ElementMatcher.Junction<TypeDescription> getNarrowTypesMatcher() {
+		return named("io.vertx.rxjava.ext.web.Route");
+	}
+
+	@Override
+	protected ElementMatcher.Junction<MethodDescription.InDefinedShape> getExtraMethodElementMatcher() {
+		return named("handler")
+				.and(takesArguments(Handler.class))
+				.and(returns(Route.class));
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/DefaultRequestNamer.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/DefaultRequestNamer.java
index db532069ae..1973118d2e 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/DefaultRequestNamer.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/DefaultRequestNamer.java
@@ -1,6 +1,7 @@
 package org.stagemonitor.vertx.utils;
 
 import io.vertx.core.eventbus.Message;
+
 public class DefaultRequestNamer implements RequestNamer {
 	@Override
 	public String getRequestName(Message<?> msg) {
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/SavedTraceContext.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/SavedTraceContext.java
index aba75f2c45..fc564b5331 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/SavedTraceContext.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/utils/SavedTraceContext.java
@@ -1,6 +1,7 @@
 package org.stagemonitor.vertx.utils;
 
 import com.uber.jaeger.context.TraceContext;
+
 import io.opentracing.Span;
 
 /**
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/MessageConsumerMonitoringHandler.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/MessageConsumerMonitoringHandler.java
index 207ed7c778..3b59e0e5fa 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/MessageConsumerMonitoringHandler.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/MessageConsumerMonitoringHandler.java
@@ -1,7 +1,5 @@
 package org.stagemonitor.vertx.wrappers;
 
-import io.vertx.core.Handler;
-import io.vertx.core.eventbus.Message;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
@@ -11,30 +9,32 @@
 import org.stagemonitor.vertx.RequestKeeper;
 import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.utils.SavedTraceContext;
-import rx.Subscriber;
 
 import java.util.LinkedHashMap;
 import java.util.Map;
 
+import io.vertx.core.Handler;
+import io.vertx.core.eventbus.Message;
+
 public class MessageConsumerMonitoringHandler implements Handler<Message<?>> {
 
-    private final Handler<Message<?>> delegate;
+	private final Handler<Message<?>> delegate;
 
-    private Logger logger = LoggerFactory.getLogger(MessageConsumerMonitoringHandler.class);
-    private VertxPlugin vertxPlugin;
-    private RequestMonitorPlugin requestMonitorPlugin;
+	private Logger logger = LoggerFactory.getLogger(MessageConsumerMonitoringHandler.class);
+	private VertxPlugin vertxPlugin;
+	private RequestMonitorPlugin requestMonitorPlugin;
 
-    public MessageConsumerMonitoringHandler(Handler<Message<?>> delegate) {
-        this.delegate = delegate;
+	public MessageConsumerMonitoringHandler(Handler<Message<?>> delegate) {
+		this.delegate = delegate;
 		vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
 		requestMonitorPlugin = Stagemonitor.getPlugin(RequestMonitorPlugin.class);
-    }
+	}
 
 	@Override
 	public void handle(Message<?> message) {
 		final RequestMonitor requestMonitor = requestMonitorPlugin.getRequestMonitor();
 		SavedTraceContext context = RequestKeeper.getInstance().getSavedContext(message.body());
-		if(context != null && context.getCurrentSpan() != null){
+		if (context != null && context.getCurrentSpan() != null) {
 			context.getTraceContext().push(context.getCurrentSpan());
 		}
 		try {
@@ -42,15 +42,13 @@ public void handle(Message<?> message) {
 		} catch (IllegalAccessException | InstantiationException | ClassNotFoundException e) {
 			e.printStackTrace();
 		}
-		try{
+		try {
 			delegate.handle(message);
-		}
-		catch (Throwable e){
+		} catch (Throwable e) {
 			requestMonitor.recordException((Exception) e);
-		}
-		finally {
+		} finally {
 			requestMonitor.monitorStop();
-			if(context != null && context.getCurrentSpan() != null){
+			if (context != null && context.getCurrentSpan() != null) {
 				context.getTraceContext().pop();
 			}
 		}
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/RouteMonitoringHandler.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/RouteMonitoringHandler.java
index 8943354dd0..d0ab042b89 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/RouteMonitoringHandler.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/RouteMonitoringHandler.java
@@ -1,45 +1,45 @@
 package org.stagemonitor.vertx.wrappers;
 
-import io.vertx.core.Handler;
-import io.vertx.rxjava.ext.web.RoutingContext;
 import org.stagemonitor.core.Stagemonitor;
 import org.stagemonitor.requestmonitor.MonitoredMethodRequest;
 import org.stagemonitor.requestmonitor.RequestMonitor;
 import org.stagemonitor.requestmonitor.RequestMonitorPlugin;
 
+import io.vertx.core.Handler;
+import io.vertx.rxjava.ext.web.RoutingContext;
+
 public class RouteMonitoringHandler implements Handler<RoutingContext> {
 
-    private Handler<RoutingContext> delegate;
+	private Handler<RoutingContext> delegate;
 	private RequestMonitorPlugin requestMonitorPlugin;
 
-    public RouteMonitoringHandler(Handler<RoutingContext> delegate) {
-        this.delegate = delegate;
+	public RouteMonitoringHandler(Handler<RoutingContext> delegate) {
+		this.delegate = delegate;
 		requestMonitorPlugin = Stagemonitor.getPlugin(RequestMonitorPlugin.class);
-    }
+	}
 
-    @Override
-    public void handle(RoutingContext event) {
-        if(!event.normalisedPath().startsWith("/eventbus") && !event.normalisedPath().equals("/")) {
-            final RequestMonitor requestMonitor = requestMonitorPlugin.getRequestMonitor();
-            startMonitoring(event);
-            try {
-                delegate.handle(event);
-            } catch (Exception e) {
-                requestMonitor.recordException(e);
-            } finally {
-                if(event.failed()){
-                    requestMonitor.recordException((Exception) ((io.vertx.ext.web.RoutingContext)event.getDelegate()).failure());
-                }
+	@Override
+	public void handle(RoutingContext event) {
+		if (!event.normalisedPath().startsWith("/eventbus") && !event.normalisedPath().equals("/")) {
+			final RequestMonitor requestMonitor = requestMonitorPlugin.getRequestMonitor();
+			startMonitoring(event);
+			try {
+				delegate.handle(event);
+			} catch (Exception e) {
+				requestMonitor.recordException(e);
+			} finally {
+				if (event.failed()) {
+					requestMonitor.recordException((Exception) ((io.vertx.ext.web.RoutingContext) event.getDelegate()).failure());
+				}
 				requestMonitor.monitorStop();
-            }
-        }
-        else{
-            delegate.handle(event);
-        }
-    }
+			}
+		} else {
+			delegate.handle(event);
+		}
+	}
 
-    private void startMonitoring(RoutingContext event){
-        final MonitoredMethodRequest monitoredRequest = new MonitoredMethodRequest(Stagemonitor.getConfiguration(), event.normalisedPath(), null);
+	private void startMonitoring(RoutingContext event) {
+		final MonitoredMethodRequest monitoredRequest = new MonitoredMethodRequest(Stagemonitor.getConfiguration(), event.normalisedPath(), null);
 		requestMonitorPlugin.getRequestMonitor().monitorStart(monitoredRequest);
-    }
+	}
 }
diff --git a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/rxJava/MessageConsumerMonitoringSubscriber.java b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/rxJava/MessageConsumerMonitoringSubscriber.java
index 247f48a7c4..682b900162 100755
--- a/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/rxJava/MessageConsumerMonitoringSubscriber.java
+++ b/stagemonitor-vertx/src/main/java/org/stagemonitor/vertx/wrappers/rxJava/MessageConsumerMonitoringSubscriber.java
@@ -1,6 +1,5 @@
 package org.stagemonitor.vertx.wrappers.rxJava;
 
-import io.vertx.rxjava.core.eventbus.Message;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.stagemonitor.core.Stagemonitor;
@@ -10,69 +9,69 @@
 import org.stagemonitor.vertx.RequestKeeper;
 import org.stagemonitor.vertx.VertxPlugin;
 import org.stagemonitor.vertx.utils.SavedTraceContext;
-import rx.Subscriber;
 
 import java.util.LinkedHashMap;
 import java.util.Map;
 
+import io.vertx.rxjava.core.eventbus.Message;
+import rx.Subscriber;
+
 public class MessageConsumerMonitoringSubscriber extends Subscriber<Message<?>> {
 
-    private final Subscriber<Message<?>> actual;
+	private final Subscriber<Message<?>> actual;
 
-    private Logger logger = LoggerFactory.getLogger(MessageConsumerMonitoringSubscriber.class);
-    private VertxPlugin vertxPlugin;
-    private RequestMonitorPlugin requestMonitorPlugin;
+	private Logger logger = LoggerFactory.getLogger(MessageConsumerMonitoringSubscriber.class);
+	private VertxPlugin vertxPlugin;
+	private RequestMonitorPlugin requestMonitorPlugin;
 
-    public MessageConsumerMonitoringSubscriber(Subscriber<Message<?>> actual) {
-        super(actual);
-        this.actual = actual;
+	public MessageConsumerMonitoringSubscriber(Subscriber<Message<?>> actual) {
+		super(actual);
+		this.actual = actual;
 		vertxPlugin = Stagemonitor.getPlugin(VertxPlugin.class);
 		requestMonitorPlugin = Stagemonitor.getPlugin(RequestMonitorPlugin.class);
-    }
+	}
 
-    @Override
-    public void onCompleted() {
-        actual.onCompleted();
-    }
+	@Override
+	public void onCompleted() {
+		actual.onCompleted();
+	}
 
-    @Override
-    public void onError(Throwable e) {
+	@Override
+	public void onError(Throwable e) {
 		requestMonitorPlugin.getRequestMonitor().recordException((Exception) e);
-        actual.onError(e);
-    }
+		actual.onError(e);
+	}
 
-    @Override
-    public void onNext(Message<?> message) {
+	@Override
+	public void onNext(Message<?> message) {
 		final RequestMonitor requestMonitor = requestMonitorPlugin.getRequestMonitor();
-        SavedTraceContext context = RequestKeeper.getInstance().getSavedContext(message.body());
-        if(context != null && context.getCurrentSpan() != null){
-            context.getTraceContext().push(context.getCurrentSpan());
-        }
+		SavedTraceContext context = RequestKeeper.getInstance().getSavedContext(message.body());
+		if (context != null && context.getCurrentSpan() != null) {
+			context.getTraceContext().push(context.getCurrentSpan());
+		}
 		try {
 			startMonitoring(message);
 		} catch (IllegalAccessException | InstantiationException | ClassNotFoundException e) {
 			e.printStackTrace();
 		}
-		try{
-            actual.onNext(message);
-        }
-        catch (Throwable e){
-            requestMonitor.recordException((Exception) e);
-        }
-        finally {
+		try {
+			actual.onNext(message);
+		} catch (Throwable e) {
+			requestMonitor.recordException((Exception) e);
+		} finally {
 			requestMonitor.monitorStop();
-			if(context != null && context.getCurrentSpan() != null){
+			if (context != null && context.getCurrentSpan() != null) {
 				context.getTraceContext().pop();
 			}
-        }
-    }
+		}
+	}
 
-    private void startMonitoring(Message<?> message) throws IllegalAccessException, InstantiationException, ClassNotFoundException {
-        final String requestName = vertxPlugin.getRequestNamer().getRequestName((io.vertx.core.eventbus.Message<?>) message.getDelegate());
-        Map<String, Object> params = new LinkedHashMap<>();
-        params.put("message", message.body());
-        final MonitoredMethodRequest monitoredRequest = new MonitoredMethodRequest(Stagemonitor.getConfiguration(), requestName, null, params);
-        final RequestMonitorPlugin requestMonitorPlugin = Stagemonitor.getPlugin(RequestMonitorPlugin.class);
-        requestMonitorPlugin.getRequestMonitor().monitorStart(monitoredRequest);
-    }
+	private void startMonitoring(Message<?> message) throws IllegalAccessException, InstantiationException, ClassNotFoundException {
+		final String requestName = vertxPlugin.getRequestNamer().getRequestName((io.vertx.core.eventbus.Message<?>) message.getDelegate());
+		Map<String, Object> params = new LinkedHashMap<>();
+		params.put("message", message.body());
+		final MonitoredMethodRequest monitoredRequest = new MonitoredMethodRequest(Stagemonitor.getConfiguration(), requestName, null, params);
+		final RequestMonitorPlugin requestMonitorPlugin = Stagemonitor.getPlugin(RequestMonitorPlugin.class);
+		requestMonitorPlugin.getRequestMonitor().monitorStart(monitoredRequest);
+	}
 }

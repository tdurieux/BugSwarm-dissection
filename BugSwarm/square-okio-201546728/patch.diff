diff --git a/.travis.yml b/.travis.yml
index d414d975..8130a0e7 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -1,9 +1,13 @@
 language: java
 
 jdk:
-  - oraclejdk7
   - oraclejdk8
 
+addons:
+  apt:
+    packages:
+      - oracle-java8-installer # Updates JDK 8 to the latest available.
+
 after_success:
   - .buildscript/deploy_snapshot.sh
 
diff --git a/okio/src/test/java/okio/ByteStringTest.java b/okio/src/test/java/okio/ByteStringTest.java
index 8a53badc..38a0e725 100644
--- a/okio/src/test/java/okio/ByteStringTest.java
+++ b/okio/src/test/java/okio/ByteStringTest.java
@@ -261,6 +261,7 @@ private ByteString makeSegments(ByteString source) {
     assertEquals(3, byteString.lastIndexOf(ByteString.decodeHex("").toByteArray()));
   }
 
+  @SuppressWarnings("SelfEquals")
   @Test public void equals() throws Exception {
     ByteString byteString = factory.decodeHex("000102");
     assertTrue(byteString.equals(byteString));
diff --git a/okio/src/test/java/okio/TestUtil.java b/okio/src/test/java/okio/TestUtil.java
index ceb12721..40594771 100644
--- a/okio/src/test/java/okio/TestUtil.java
+++ b/okio/src/test/java/okio/TestUtil.java
@@ -89,6 +89,7 @@ static String repeat(char c, int count) {
     return new String(array);
   }
 
+  @SuppressWarnings("SelfEquals")
   public static void assertEquivalent(ByteString b1, ByteString b2) {
     // Equals.
     assertTrue(b1.equals(b2));
@@ -125,6 +126,7 @@ public static void assertEquivalent(ByteString b1, ByteString b2) {
     }
   }
 
+  @SuppressWarnings("SelfEquals")
   public static void assertEquivalent(Buffer b1, Buffer b2) {
     // Equals.
     assertTrue(b1.equals(b2));
diff --git a/pom.xml b/pom.xml
index bf3e612f..f7301f82 100644
--- a/pom.xml
+++ b/pom.xml
@@ -85,11 +85,25 @@
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
-          <version>3.0</version>
+          <version>3.6.1</version>
           <configuration>
+            <compilerId>javac-with-errorprone</compilerId>
+            <forceJavacCompilerUse>true</forceJavacCompilerUse>
             <source>${java.version}</source>
             <target>${java.version}</target>
           </configuration>
+          <dependencies>
+            <dependency>
+              <groupId>org.codehaus.plexus</groupId>
+              <artifactId>plexus-compiler-javac-errorprone</artifactId>
+              <version>2.8.1</version>
+            </dependency>
+            <dependency>
+              <groupId>com.google.errorprone</groupId>
+              <artifactId>error_prone_core</artifactId>
+              <version>2.0.16</version>
+            </dependency>
+          </dependencies>
         </plugin>
       </plugins>
     </pluginManagement>
